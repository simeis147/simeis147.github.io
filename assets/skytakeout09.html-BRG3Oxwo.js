import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as p,o as u,c as i,e as o,w as a,b as n,d as s}from"./app-iEFccyfP.js";const k={},r=n("h1",{id:"day09-项目实战-历史订单、订单管理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#day09-项目实战-历史订单、订单管理"},[n("span",null,"Day09 项目实战（历史订单、订单管理）")])],-1),d=n("h2",{id:"_1-历史订单",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-历史订单"},[n("span",null,"1. 历史订单")])],-1),m=n("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token doc-comment comment"},[s(`/**
     * 历史订单查询
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"page"),s(`
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"pageSize"),s(`
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"status"),s(`  订单状态 1待付款 2待接单 3已接单 4派送中 5已完成 6已取消
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@GetMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/historyOrders"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"历史订单查询"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"PageResult"),n("span",{class:"token punctuation"},">")]),s(),n("span",{class:"token function"},"page"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"int"),s(" page"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"int"),s(" pageSize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Integer"),s(" status"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        log`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"历史订单查询page:{},pageSize:{},status:{}"'),n("span",{class:"token punctuation"},","),s("page"),n("span",{class:"token punctuation"},","),s("pageSize"),n("span",{class:"token punctuation"},","),s("status"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"PageResult"),s(" pageResult "),n("span",{class:"token operator"},"="),s(" orderService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pageOrders"),n("span",{class:"token punctuation"},"("),s("page"),n("span",{class:"token punctuation"},","),s("pageSize"),n("span",{class:"token punctuation"},","),s("status"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("pageResult"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`


    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 查询订单详情
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@GetMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/orderDetail/{id}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"查询订单详情"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"OrderVO"),n("span",{class:"token punctuation"},">")]),s(),n("span",{class:"token function"},"detials"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@PathVariable"),s(),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        log`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"查询订单详情id: {}"'),n("span",{class:"token punctuation"},","),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"OrderVO"),s(" orderVO "),n("span",{class:"token operator"},"="),s(" orderService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"details"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("orderVO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token annotation punctuation"},"@PutMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/cancel/{id}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"取消订单"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),s(),n("span",{class:"token function"},"cancel"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@PathVariable"),s(),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),s(),n("span",{class:"token punctuation"},"{"),s(`
        log`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"取消订单id:{}"'),n("span",{class:"token punctuation"},","),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orderService`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"cancelOrder"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`


    `),n("span",{class:"token annotation punctuation"},"@PostMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/repetition/{id}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"再来一单"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),s(),n("span",{class:"token function"},"repetition"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@PathVariable"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"id"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
        log`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"再来一单:{}"'),n("span",{class:"token punctuation"},","),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orderService`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"repetition"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),v=n("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token doc-comment comment"},[s(`/**
     * 历史订单查询
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"page"),s(`
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"pageSize"),s(`
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"status"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token class-name"},"PageResult"),s(),n("span",{class:"token function"},"pageOrders"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"int"),s(" page"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"int"),s(" pageSize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Integer"),s(" status"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 查询订单详情id
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token class-name"},"OrderVO"),s(),n("span",{class:"token function"},"details"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 取消订单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"cancelOrder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 再来一单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"repetition"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=n("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("    "),n("span",{class:"token doc-comment comment"},[s(`/**
     * 历史订单查询
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"page"),s(`
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"pageSize"),s(`
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"status"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"PageResult"),s(),n("span",{class:"token function"},"pageOrders"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"int"),s(" page"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"int"),s(" pageSize"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"Integer"),s(" status"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 设置分页"),s(`
        `),n("span",{class:"token class-name"},"PageHelper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"startPage"),n("span",{class:"token punctuation"},"("),s("page"),n("span",{class:"token punctuation"},","),s("pageSize"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token class-name"},"OrdersPageQueryDTO"),s(" ordersPageQueryDTO "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrdersPageQueryDTO"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        ordersPageQueryDTO`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setUserId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"BaseContext"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getCurrentId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        ordersPageQueryDTO`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setStatus"),n("span",{class:"token punctuation"},"("),s("status"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 分页条件查询"),s(`
        `),n("span",{class:"token class-name"},"Page"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},">")]),s(" pageOrders "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"pageQuery"),n("span",{class:"token punctuation"},"("),s("ordersPageQueryDTO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"OrderVO"),n("span",{class:"token punctuation"},">")]),s(" orderVOList "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"ArrayList"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token punctuation"},">")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("pageOrders "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token operator"},"&&"),s(" pageOrders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getTotal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),s(" orders "),n("span",{class:"token operator"},":"),s(" pageOrders"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
                `),n("span",{class:"token class-name"},"Long"),s(" ordersId "),n("span",{class:"token operator"},"="),s(" orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

                `),n("span",{class:"token comment"},"// 查询订单明细"),s(`
                `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"OrderDetail"),n("span",{class:"token punctuation"},">")]),s(" orderDetails "),n("span",{class:"token operator"},"="),s(" orderDetailMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getByOrderId"),n("span",{class:"token punctuation"},"("),s("ordersId"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

                `),n("span",{class:"token class-name"},"OrderVO"),s(" orderVO "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrderVO"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                `),n("span",{class:"token class-name"},"BeanUtils"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"copyProperties"),n("span",{class:"token punctuation"},"("),s("orders"),n("span",{class:"token punctuation"},","),s("orderVO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
                orderVO`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setOrderDetailList"),n("span",{class:"token punctuation"},"("),s("orderDetails"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

                orderVOList`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("orderVO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`


        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PageResult"),n("span",{class:"token punctuation"},"("),s("pageOrders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getTotal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s("orderVOList"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 查询订单详情id
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"OrderVO"),s(),n("span",{class:"token function"},"details"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 根据id查询订单消息"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" orders "),n("span",{class:"token operator"},"="),s("  orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getById"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 根据order_id查询订单详情信息"),s(`
        `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"OrderDetail"),n("span",{class:"token punctuation"},">")]),s(" orderDetails "),n("span",{class:"token operator"},"="),s(" orderDetailMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getByOrderId"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token class-name"},"OrderVO"),s(" orderVO "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrderVO"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"BeanUtils"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"copyProperties"),n("span",{class:"token punctuation"},"("),s("orders"),n("span",{class:"token punctuation"},","),s("orderVO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orderVO`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setOrderDetailList"),n("span",{class:"token punctuation"},"("),s("orderDetails"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"return"),s(" orderVO"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 取消订单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"cancelOrder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" orderDB "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getById"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 效验订单是否存在"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("orderDB "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrderBusinessException"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"MessageConstant"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"ORDER_NOT_FOUND"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`
        `),n("span",{class:"token comment"},"//订单状态 1待付款 2待接单 3已接单 4派送中 5已完成 6已取消"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("orderDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrderBusinessException"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"MessageConstant"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"ORDER_STATUS_ERROR"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

        `),n("span",{class:"token class-name"},"Orders"),s(" orders "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setId"),n("span",{class:"token punctuation"},"("),s("orderDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 订单处于待接单状态下取消，需要进行退款"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("orderDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"equals"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"TO_BE_CONFIRMED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"//调用微信支付退款接口"),s(`
            weChatPayUtil`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"refund"),n("span",{class:"token punctuation"},"("),s(`
                    orderDB`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getNumber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"//商户订单号"),s(`
                    orderDB`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getNumber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token comment"},"//商户退款单号"),s(`
                    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BigDecimal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0.01"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),n("span",{class:"token comment"},"//退款金额，单位 元"),s(`
                    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BigDecimal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0.01"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"//原订单金额"),s(`

            `),n("span",{class:"token comment"},"//支付状态修改为 退款"),s(`
            orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setPayStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"REFUND"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

        `),n("span",{class:"token comment"},"// 更新订单状态、取消原因、取消时间"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"CANCELLED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setCancelReason"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"用户取消"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setCancelTime"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"LocalDateTime"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"now"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orderMapper`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 再来一单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"repetition"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 查询当前用户id"),s(`
        `),n("span",{class:"token class-name"},"Long"),s(" userId "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"BaseContext"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getCurrentId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 根据订单id查询当前订单详情"),s(`
        `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"OrderDetail"),n("span",{class:"token punctuation"},">")]),s(" orderDetailList "),n("span",{class:"token operator"},"="),s(" orderDetailMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getByOrderId"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 将订单详情对象转换为购物车对象"),s(`
        `),n("span",{class:"token class-name"},"List"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"ShoppingCart"),n("span",{class:"token punctuation"},">")]),s(" shoppingCartList "),n("span",{class:"token operator"},"="),s(" orderDetailList"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"stream"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"map"),n("span",{class:"token punctuation"},"("),s("x "),n("span",{class:"token operator"},"->"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token class-name"},"ShoppingCart"),s(" shoppingCart "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"ShoppingCart"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

            `),n("span",{class:"token comment"},"// 将原订单详情里面的菜品信息重新复制到购物车对象中"),s(`
            `),n("span",{class:"token class-name"},"BeanUtils"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"copyProperties"),n("span",{class:"token punctuation"},"("),s("x"),n("span",{class:"token punctuation"},","),s(" shoppingCart"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"id"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            shoppingCart`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setUserId"),n("span",{class:"token punctuation"},"("),s("userId"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            shoppingCart`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setCreateTime"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"LocalDateTime"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"now"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

            `),n("span",{class:"token keyword"},"return"),s(" shoppingCart"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"collect"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Collectors"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toList"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 将购物车对象批量添加到数据库"),s(`
        shoppingCartMapper`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"insertBatch"),n("span",{class:"token punctuation"},"("),s("shoppingCartList"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),g=n("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[n("pre",{class:"language-java"},[n("code",null,[n("span",{class:"token annotation punctuation"},"@Mapper"),s(`
`),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"interface"),s(),n("span",{class:"token class-name"},"OrderMapper"),s(),n("span",{class:"token punctuation"},"{"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 插入订单数据
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"orders"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"insert"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),s(" orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 根据订单号查询订单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"orderNumber"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@Select"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"select * from orders where number = #{orderNumber}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token class-name"},"Orders"),s(),n("span",{class:"token function"},"getByNumber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"String"),s(" orderNumber"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 修改订单信息
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"orders"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),s(" orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 分页条件查询并按下单时间排序
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersPageQueryDTO"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token class-name"},"Page"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},">")]),s(),n("span",{class:"token function"},"pageQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersPageQueryDTO"),s(" ordersPageQueryDTO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`


    `),n("span",{class:"token annotation punctuation"},"@Select"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"select * from orders where id = #{id}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token class-name"},"Orders"),s(),n("span",{class:"token function"},"getById"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 根据状态统计订单数量
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"status"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@Select"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"select count(id) from orders where status = #{status}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token class-name"},"Integer"),s(),n("span",{class:"token function"},"countStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Integer"),s(" status"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=n("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"xml"},[n("pre",{class:"language-xml"},[n("code",null,[n("span",{class:"token prolog"},'<?xml version="1.0" encoding="UTF-8" ?>'),s(`
`),n("span",{class:"token doctype"},[n("span",{class:"token punctuation"},"<!"),n("span",{class:"token doctype-tag"},"DOCTYPE"),s(),n("span",{class:"token name"},"mapper"),s(),n("span",{class:"token name"},"PUBLIC"),s(),n("span",{class:"token string"},'"-//mybatis.org//DTD Mapper 3.0//EN"'),s(`
        `),n("span",{class:"token string"},'"http://mybatis.org/dtd/mybatis-3-mapper.dtd"'),s(),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("mapper")]),s(),n("span",{class:"token attr-name"},"namespace"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("com.sky.mapper.OrderMapper"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("insert")]),s(),n("span",{class:"token attr-name"},"id"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("insert"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"useGeneratedKeys"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("true"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"keyProperty"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("id"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
        insert into
            orders (number, status, user_id, address_book_id, order_time, checkout_time, pay_method, pay_status,
                    amount, remark, phone, address, user_name, consignee, cancel_reason, rejection_reason, cancel_time,
                    estimated_delivery_time, delivery_status, delivery_time, pack_amount, tableware_number, tableware_status)
        VALUES
            (#{number},#{status},#{userId},#{addressBookId},#{orderTime},#{checkoutTime},#{payMethod},#{payStatus},
             #{amount},#{remark},#{phone},#{address},#{userName},#{consignee},#{cancelReason},#{rejectionReason},#{checkoutTime},
             #{estimatedDeliveryTime},#{deliveryStatus},#{deliveryTime},#{packAmount},#{tablewareNumber},#{tablewareStatus})
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("insert")]),n("span",{class:"token punctuation"},">")]),s(`

    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("update")]),s(),n("span",{class:"token attr-name"},"id"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("update"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"parameterType"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("com.sky.entity.Orders"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
        update orders
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("set")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("cancelReason != null and cancelReason!='' "),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                cancel_reason=#{cancelReason},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("rejectionReason != null and rejectionReason!='' "),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                rejection_reason=#{rejectionReason},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("cancelTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                cancel_time=#{cancelTime},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("payStatus != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                pay_status=#{payStatus},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("payMethod != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                pay_method=#{payMethod},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("checkoutTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                checkout_time=#{checkoutTime},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("status != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                status = #{status},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("deliveryTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                delivery_time = #{deliveryTime}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("set")]),n("span",{class:"token punctuation"},">")]),s(`
        where id = #{id}
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("update")]),n("span",{class:"token punctuation"},">")]),s(`

    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("select")]),s(),n("span",{class:"token attr-name"},"id"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("pageQuery"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"resultType"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("com.sky.entity.Orders"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
        select * from orders
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("where")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("number != null and number !=''"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and number like concat('%',#{number},'%')
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("phone != null and phone !=''"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and phone like concat('%',#{phone},'%')
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("userId != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and user_id = #{userId}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("status != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and status = #{status}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("beginTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and order_time `),n("span",{class:"token entity named-entity",title:">"},"&gt;"),s(`= #{beginTime}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("endTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and order_time `),n("span",{class:"token entity named-entity",title:"<"},"&lt;"),s(`= #{endTime}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("where")]),n("span",{class:"token punctuation"},">")]),s(`
        order by order_time desc
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("select")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("mapper")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),f=n("h2",{id:"_2-订单管理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-订单管理"},[n("span",null,"2. 订单管理")])],-1),w=n("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[n("pre",{class:"language-java"},[n("code",null,[s(),n("span",{class:"token doc-comment comment"},[s(`/**
     * 各个状态的订单数量统计
     *
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@GetMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/statistics"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"各个状态的订单数量统计"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"OrderStatisticsVO"),n("span",{class:"token punctuation"},">")]),s(),n("span",{class:"token function"},"statistics"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"OrderStatisticsVO"),s(" orderStatisticsVO "),n("span",{class:"token operator"},"="),s(" orderService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"statistics"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("orderStatisticsVO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 订单详情
     *
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@GetMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/details/{id}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"查询订单详情"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"OrderVO"),n("span",{class:"token punctuation"},">")]),s(),n("span",{class:"token function"},"details"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@PathVariable"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"id"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"OrderVO"),s(" orderVO "),n("span",{class:"token operator"},"="),s(" orderService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"details"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),s("orderVO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 接单
     *
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@PutMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/confirm"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"接单"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),s(),n("span",{class:"token function"},"confirm"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@RequestBody"),s(),n("span",{class:"token class-name"},"OrdersConfirmDTO"),s(" ordersConfirmDTO"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        orderService`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"confirm"),n("span",{class:"token punctuation"},"("),s("ordersConfirmDTO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`


    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 拒单
     *
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@PutMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/rejection"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"拒单"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),s(),n("span",{class:"token function"},"rejection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@RequestBody"),s(),n("span",{class:"token class-name"},"OrdersRejectionDTO"),s(" ordersRejectionDTO"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),s(),n("span",{class:"token punctuation"},"{"),s(`
        orderService`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"rejection"),n("span",{class:"token punctuation"},"("),s("ordersRejectionDTO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 取消订单
     *
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@PutMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/cancel"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"取消订单"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),s(),n("span",{class:"token function"},"cancel"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@RequestBody"),s(),n("span",{class:"token class-name"},"OrdersCancelDTO"),s(" ordersCancelDTO"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),s(),n("span",{class:"token punctuation"},"{"),s(`
        orderService`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"cancel"),n("span",{class:"token punctuation"},"("),s("ordersCancelDTO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 派送订单
     *
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@PutMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/delivery/{id}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"派送订单"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),s(),n("span",{class:"token function"},"delivery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@PathVariable"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"id"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        orderService`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"delivery"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 完成订单
     *
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@PutMapping"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"/complete/{id}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token annotation punctuation"},"@ApiOperation"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"完成订单"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"Result"),s(),n("span",{class:"token function"},"complete"),n("span",{class:"token punctuation"},"("),n("span",{class:"token annotation punctuation"},"@PathVariable"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"id"'),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        orderService`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"complete"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token class-name"},"Result"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"success"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),O=n("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[n("pre",{class:"language-java"},[n("code",null,[s(),n("span",{class:"token doc-comment comment"},[s(`/**
     * 订单搜索
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersPageQueryDTO"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token class-name"},"PageResult"),s(),n("span",{class:"token function"},"conditionSearch"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersPageQueryDTO"),s(" ordersPageQueryDTO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 各个状态的订单数量统计
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token class-name"},"OrderStatisticsVO"),s(),n("span",{class:"token function"},"statistics"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 接单
     *
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersConfirmDTO"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"confirm"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersConfirmDTO"),s(" ordersConfirmDTO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 拒单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersRejectionDTO"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"rejection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersRejectionDTO"),s(" ordersRejectionDTO"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 取消订单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersCancelDTO"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"cancel"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersCancelDTO"),s(" ordersCancelDTO"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 派送订单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"delivery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 完成订单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"complete"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),h=n("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[n("pre",{class:"language-java"},[n("code",null,[s("   "),n("span",{class:"token doc-comment comment"},[s(`/**
     * 各个状态的订单数量统计
     *
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token class-name"},"OrderStatisticsVO"),s(),n("span",{class:"token function"},"statistics"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 根据状态，分别查询出待接单、待派送、派送中的订单数量"),s(`
        `),n("span",{class:"token class-name"},"Integer"),s(" toBeConfirmed "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"countStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"TO_BE_CONFIRMED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"Integer"),s(" confirmed "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"countStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"CONFIRMED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token class-name"},"Integer"),s(" deliveryInProgress "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"countStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"DELIVERY_IN_PROGRESS"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 将查询出的数据封装到orderStatisticsVO中响应"),s(`
        `),n("span",{class:"token class-name"},"OrderStatisticsVO"),s(" orderStatisticsVO "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrderStatisticsVO"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orderStatisticsVO`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setToBeConfirmed"),n("span",{class:"token punctuation"},"("),s("toBeConfirmed"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orderStatisticsVO`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setConfirmed"),n("span",{class:"token punctuation"},"("),s("confirmed"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orderStatisticsVO`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setDeliveryInProgress"),n("span",{class:"token punctuation"},"("),s("deliveryInProgress"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" orderStatisticsVO"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 接单
     *
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersConfirmDTO"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"confirm"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersConfirmDTO"),s(" ordersConfirmDTO"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" orders "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"builder"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
                `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"id"),n("span",{class:"token punctuation"},"("),s("ordersConfirmDTO"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
                `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"status"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"CONFIRMED"),n("span",{class:"token punctuation"},")"),s(`
                `),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"build"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        orderMapper`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 拒单
     *
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersRejectionDTO"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"rejection"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersRejectionDTO"),s(" ordersRejectionDTO"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 根据id查询订单"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" ordersDB "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getById"),n("span",{class:"token punctuation"},"("),s("ordersRejectionDTO"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 订单只有存在且状态为2（待接单）才可以拒单"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ordersDB "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token operator"},"!"),s("ordersDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"equals"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"TO_BE_CONFIRMED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrderBusinessException"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"MessageConstant"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"ORDER_STATUS_ERROR"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

        `),n("span",{class:"token comment"},"//支付状态"),s(`
        `),n("span",{class:"token class-name"},"Integer"),s(" payStatus "),n("span",{class:"token operator"},"="),s(" ordersDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getPayStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("payStatus "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"PAID"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"//用户已支付，需要退款"),s(`
            `),n("span",{class:"token class-name"},"String"),s(" refund "),n("span",{class:"token operator"},"="),s(" weChatPayUtil"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"refund"),n("span",{class:"token punctuation"},"("),s(`
                    ordersDB`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getNumber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                    ordersDB`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getNumber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BigDecimal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0.01"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BigDecimal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0.01"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            log`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"申请退款：{}"'),n("span",{class:"token punctuation"},","),s(" refund"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

        `),n("span",{class:"token comment"},"// 拒单需要退款，根据订单id更新订单状态、拒单原因、取消时间"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" orders "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setId"),n("span",{class:"token punctuation"},"("),s("ordersDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"CANCELLED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setRejectionReason"),n("span",{class:"token punctuation"},"("),s("ordersRejectionDTO"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getRejectionReason"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setCancelTime"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"LocalDateTime"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"now"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        orderMapper`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 取消订单
     *
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersCancelDTO"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"cancel"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersCancelDTO"),s(" ordersCancelDTO"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"throws"),s(),n("span",{class:"token class-name"},"Exception"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 根据id查询订单"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" ordersDB "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getById"),n("span",{class:"token punctuation"},"("),s("ordersCancelDTO"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"//支付状态"),s(`
        `),n("span",{class:"token class-name"},"Integer"),s(" payStatus "),n("span",{class:"token operator"},"="),s(" ordersDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getPayStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("payStatus "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token comment"},"//用户已支付，需要退款"),s(`
            `),n("span",{class:"token class-name"},"String"),s(" refund "),n("span",{class:"token operator"},"="),s(" weChatPayUtil"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"refund"),n("span",{class:"token punctuation"},"("),s(`
                    ordersDB`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getNumber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                    ordersDB`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getNumber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BigDecimal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0.01"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
                    `),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BigDecimal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"0.01"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
            log`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"info"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"申请退款：{}"'),n("span",{class:"token punctuation"},","),s(" refund"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

        `),n("span",{class:"token comment"},"// 管理端取消订单需要退款，根据订单id更新订单状态、取消原因、取消时间"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" orders "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setId"),n("span",{class:"token punctuation"},"("),s("ordersCancelDTO"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"CANCELLED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setCancelReason"),n("span",{class:"token punctuation"},"("),s("ordersCancelDTO"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getCancelReason"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setCancelTime"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"LocalDateTime"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"now"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orderMapper`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 派送订单
     *
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"delivery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 根据id查询订单"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" ordersDB "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getById"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 校验订单是否存在，并且状态为3"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ordersDB "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token operator"},"!"),s("ordersDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"equals"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"CONFIRMED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrderBusinessException"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"MessageConstant"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"ORDER_STATUS_ERROR"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

        `),n("span",{class:"token class-name"},"Orders"),s(" orders "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setId"),n("span",{class:"token punctuation"},"("),s("ordersDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// 更新订单状态,状态转为派送中"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"DELIVERY_IN_PROGRESS"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        orderMapper`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 完成订单
     *
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"id"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"complete"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 根据id查询订单"),s(`
        `),n("span",{class:"token class-name"},"Orders"),s(" ordersDB "),n("span",{class:"token operator"},"="),s(" orderMapper"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getById"),n("span",{class:"token punctuation"},"("),s("id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token comment"},"// 校验订单是否存在，并且状态为4"),s(`
        `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("ordersDB "),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token keyword"},"null"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token operator"},"!"),s("ordersDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"equals"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"DELIVERY_IN_PROGRESS"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
            `),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"OrderBusinessException"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"MessageConstant"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"ORDER_STATUS_ERROR"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token punctuation"},"}"),s(`

        `),n("span",{class:"token class-name"},"Orders"),s(" orders "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setId"),n("span",{class:"token punctuation"},"("),s("ordersDB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getId"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token comment"},"// 更新订单状态,状态转为完成"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},"."),n("span",{class:"token constant"},"COMPLETED"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        orders`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"setDeliveryTime"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"LocalDateTime"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"now"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        orderMapper`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),D=n("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"java"},[n("pre",{class:"language-java"},[n("code",null,[n("span",{class:"token annotation punctuation"},"@Mapper"),s(`
`),n("span",{class:"token keyword"},"public"),s(),n("span",{class:"token keyword"},"interface"),s(),n("span",{class:"token class-name"},"OrderMapper"),s(),n("span",{class:"token punctuation"},"{"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 插入订单数据
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"orders"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"insert"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),s(" orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 根据订单号查询订单
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"orderNumber"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@Select"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"select * from orders where number = #{orderNumber}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token class-name"},"Orders"),s(),n("span",{class:"token function"},"getByNumber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"String"),s(" orderNumber"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 修改订单信息
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"orders"),s(`
     */`)]),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Orders"),s(" orders"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 分页条件查询并按下单时间排序
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"ordersPageQueryDTO"),s(`
     * `),n("span",{class:"token keyword"},"@return"),s(`
     */`)]),s(`
    `),n("span",{class:"token class-name"},"Page"),n("span",{class:"token generics"},[n("span",{class:"token punctuation"},"<"),n("span",{class:"token class-name"},"Orders"),n("span",{class:"token punctuation"},">")]),s(),n("span",{class:"token function"},"pageQuery"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"OrdersPageQueryDTO"),s(" ordersPageQueryDTO"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`


    `),n("span",{class:"token annotation punctuation"},"@Select"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"select * from orders where id = #{id}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token class-name"},"Orders"),s(),n("span",{class:"token function"},"getById"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Long"),s(" id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token doc-comment comment"},[s(`/**
     * 根据状态统计订单数量
     * `),n("span",{class:"token keyword"},"@param"),s(),n("span",{class:"token parameter"},"status"),s(`
     */`)]),s(`
    `),n("span",{class:"token annotation punctuation"},"@Select"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"select count(id) from orders where status = #{status}"'),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token class-name"},"Integer"),s(),n("span",{class:"token function"},"countStatus"),n("span",{class:"token punctuation"},"("),n("span",{class:"token class-name"},"Integer"),s(" status"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_=n("div",{class:"language-xml line-numbers-mode","data-ext":"xml","data-title":"xml"},[n("pre",{class:"language-xml"},[n("code",null,[n("span",{class:"token prolog"},'<?xml version="1.0" encoding="UTF-8" ?>'),s(`
`),n("span",{class:"token doctype"},[n("span",{class:"token punctuation"},"<!"),n("span",{class:"token doctype-tag"},"DOCTYPE"),s(),n("span",{class:"token name"},"mapper"),s(),n("span",{class:"token name"},"PUBLIC"),s(),n("span",{class:"token string"},'"-//mybatis.org//DTD Mapper 3.0//EN"'),s(`
        `),n("span",{class:"token string"},'"http://mybatis.org/dtd/mybatis-3-mapper.dtd"'),s(),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("mapper")]),s(),n("span",{class:"token attr-name"},"namespace"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("com.sky.mapper.OrderMapper"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("insert")]),s(),n("span",{class:"token attr-name"},"id"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("insert"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"useGeneratedKeys"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("true"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"keyProperty"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("id"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
        insert into
            orders (number, status, user_id, address_book_id, order_time, checkout_time, pay_method, pay_status,
                    amount, remark, phone, address, user_name, consignee, cancel_reason, rejection_reason, cancel_time,
                    estimated_delivery_time, delivery_status, delivery_time, pack_amount, tableware_number, tableware_status)
        VALUES
            (#{number},#{status},#{userId},#{addressBookId},#{orderTime},#{checkoutTime},#{payMethod},#{payStatus},
             #{amount},#{remark},#{phone},#{address},#{userName},#{consignee},#{cancelReason},#{rejectionReason},#{checkoutTime},
             #{estimatedDeliveryTime},#{deliveryStatus},#{deliveryTime},#{packAmount},#{tablewareNumber},#{tablewareStatus})
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("insert")]),n("span",{class:"token punctuation"},">")]),s(`

    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("update")]),s(),n("span",{class:"token attr-name"},"id"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("update"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"parameterType"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("com.sky.entity.Orders"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
        update orders
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("set")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("cancelReason != null and cancelReason!='' "),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                cancel_reason=#{cancelReason},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("rejectionReason != null and rejectionReason!='' "),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                rejection_reason=#{rejectionReason},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("cancelTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                cancel_time=#{cancelTime},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("payStatus != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                pay_status=#{payStatus},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("payMethod != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                pay_method=#{payMethod},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("checkoutTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                checkout_time=#{checkoutTime},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("status != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                status = #{status},
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("deliveryTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                delivery_time = #{deliveryTime}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("set")]),n("span",{class:"token punctuation"},">")]),s(`
        where id = #{id}
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("update")]),n("span",{class:"token punctuation"},">")]),s(`

    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("select")]),s(),n("span",{class:"token attr-name"},"id"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("pageQuery"),n("span",{class:"token punctuation"},'"')]),s(),n("span",{class:"token attr-name"},"resultType"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("com.sky.entity.Orders"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
        select * from orders
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("where")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("number != null and number !=''"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and number like concat('%',#{number},'%')
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("phone != null and phone !=''"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and phone like concat('%',#{phone},'%')
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("userId != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and user_id = #{userId}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("status != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and status = #{status}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("beginTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and order_time `),n("span",{class:"token entity named-entity",title:">"},"&gt;"),s(`= #{beginTime}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"<"),s("if")]),s(),n("span",{class:"token attr-name"},"test"),n("span",{class:"token attr-value"},[n("span",{class:"token punctuation attr-equals"},"="),n("span",{class:"token punctuation"},'"'),s("endTime != null"),n("span",{class:"token punctuation"},'"')]),n("span",{class:"token punctuation"},">")]),s(`
                and order_time `),n("span",{class:"token entity named-entity",title:"<"},"&lt;"),s(`= #{endTime}
            `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("if")]),n("span",{class:"token punctuation"},">")]),s(`
        `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("where")]),n("span",{class:"token punctuation"},">")]),s(`
        order by order_time desc
    `),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("select")]),n("span",{class:"token punctuation"},">")]),s(`
`),n("span",{class:"token tag"},[n("span",{class:"token tag"},[n("span",{class:"token punctuation"},"</"),s("mapper")]),n("span",{class:"token punctuation"},">")]),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1);function T(S,R){const c=p("Tabs");return u(),i("div",null,[r,d,o(c,{id:"6",data:[{id:"Controller层"},{id:"Service层"},{id:"ServiceImpl层"},{id:"Mapper层"}]},{title0:a(({value:t,isActive:e})=>[s("Controller层")]),title1:a(({value:t,isActive:e})=>[s("Service层")]),title2:a(({value:t,isActive:e})=>[s("ServiceImpl层")]),title3:a(({value:t,isActive:e})=>[s("Mapper层")]),tab0:a(({value:t,isActive:e})=>[m]),tab1:a(({value:t,isActive:e})=>[v]),tab2:a(({value:t,isActive:e})=>[b]),tab3:a(({value:t,isActive:e})=>[g,y]),_:1}),f,o(c,{id:"24",data:[{id:"Controller层"},{id:"Service层"},{id:"ServiceImpl层"},{id:"Mapper层"}]},{title0:a(({value:t,isActive:e})=>[s("Controller层")]),title1:a(({value:t,isActive:e})=>[s("Service层")]),title2:a(({value:t,isActive:e})=>[s("ServiceImpl层")]),title3:a(({value:t,isActive:e})=>[s("Mapper层")]),tab0:a(({value:t,isActive:e})=>[w]),tab1:a(({value:t,isActive:e})=>[O]),tab2:a(({value:t,isActive:e})=>[h]),tab3:a(({value:t,isActive:e})=>[D,_]),_:1})])}const B=l(k,[["render",T],["__file","skytakeout09.html.vue"]]),j=JSON.parse('{"path":"/project/skytakeout/skytakeout09.html","title":"Day09 项目实战（历史订单、订单管理）","lang":"zh-CN","frontmatter":{"order":9,"date":"2023-07-18T00:00:00.000Z","category":["苍穹外卖"],"description":"Day09 项目实战（历史订单、订单管理） 1. 历史订单 2. 订单管理","head":[["meta",{"property":"og:url","content":"https://tech.dongcp.top/project/skytakeout/skytakeout09.html"}],["meta",{"property":"og:site_name","content":"Simeis 147"}],["meta",{"property":"og:title","content":"Day09 项目实战（历史订单、订单管理）"}],["meta",{"property":"og:description","content":"Day09 项目实战（历史订单、订单管理） 1. 历史订单 2. 订单管理"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-09-04T12:27:15.000Z"}],["meta",{"property":"article:author","content":"Dongcp"}],["meta",{"property":"article:published_time","content":"2023-07-18T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-09-04T12:27:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Day09 项目实战（历史订单、订单管理）\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-07-18T00:00:00.000Z\\",\\"dateModified\\":\\"2023-09-04T12:27:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Dongcp\\",\\"url\\":\\"https://github.com/simeis147\\"}]}"]]},"headers":[{"level":2,"title":"1. 历史订单","slug":"_1-历史订单","link":"#_1-历史订单","children":[]},{"level":2,"title":"2. 订单管理","slug":"_2-订单管理","link":"#_2-订单管理","children":[]}],"git":{"createdTime":1689764954000,"updatedTime":1693830435000,"contributors":[{"name":"Dongcp","email":"cpdong7@gmail.com","commits":2}]},"readingTime":{"minutes":7.46,"words":2237},"filePathRelative":"project/skytakeout/skytakeout09.md","localizedDate":"2023年7月18日","excerpt":"\\n<h2>1. 历史订单</h2>\\n\\n<h2>2. 订单管理</h2>\\n\\n","autoDesc":true}');export{B as comp,j as data};
